<script src="https://code.highcharts.com/highcharts.js"></script>
<script src="https://code.highcharts.com/modules/exporting.js"></script>
<script src="https://code.highcharts.com/modules/offline-exporting.js"></script>
<script src="jquery.js"></script>
<link href="https://fonts.googleapis.com/css2?family=Noto+Sans+JP:wght@400;700&display=swap" rel="stylesheet">

<style>
    #container {
        max-width: 800px;
        height: 400px;
        margin: 1em auto;
    }

    blockquote {
        background-color: grey;
    }

    textarea {
        width: 100%;
        background-color: #c3c3c3;
    }

    button {
        cursor: pointer;
    }
</style>
<h1>Basic Example export HighChart with Japanese</h1>

<div>The encoding not working even we introduce font character in our site</div>
<div> Example : </div>

<blockquote>
    <textarea readonly style="height: 435px;">
        <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+JP:wght@400;700&display=swap" rel="stylesheet">
        <script>
            Highcharts.setOptions({
                chart: {
                    style: {
                        fontFamily: 'Noto Sans JP, sans-serif'
                    }
                },
                lang: {
                    decimalPoint: '.',
                    thousandsSep: ','
                }
            });

            var exportChart = function () {
                chart.exportChart({
                    type: 'image/png',
                    filename: 'highcharts-export',
                    chartOptions: {
                        chart: {
                            style: {
                                fontFamily: 'Noto Sans JP, sans-serif'
                            }
                        }
                    }
                });
            }
        </script>
    </textarea>
</blockquote>

<button type="button"> Fail to Encode </button>
<hr>
<div>As document we have to use <a href="https://www.highcharts.com/docs/export-module/export-module-overview">HighChart
        export-module</a></div>
<div>And we have to import font when export with PDF<a
        href="https://api.highcharts.com/highcharts/exporting.pdfFont">HighChart
        export-module</a></div>
<div> Example introduce </div>

<blockquote>
    <textarea readonly style="height: 270px;">
        <script src="https://code.highcharts.com/highcharts.js"></script>
        <script src="https://code.highcharts.com/modules/exporting.js"></script>
        <script src="https://code.highcharts.com/modules/offline-exporting.js"></script>

        <script>
            Highcharts.chart('container', {
                ///////// some code
                exporting: { ///// for export PDF we have to introduce font
                    pdfFont: {
                        normal: 'NotoSans-Regular.ttf',
                        bold: 'NotoSans-Bold.ttf',
                        bolditalic: 'NotoSans-BoldItalic.ttf',
                        italic: 'NotoSans-Italic.ttf'
                    }
                }
            });
        </script>
    </textarea>
</blockquote>

<div>please click "highcharts-button-box" <img style="width: 20px;"
        src="https://as2.ftcdn.net/v2/jpg/01/09/84/11/1000_F_109841191_B1qcKCxRwwt4DWIBpXD7bc4IPcozRBzT.jpg"> </div>
<div id="container"></div>

<script>
    // Load the font and configure Highcharts to use it
    document.fonts.load('10pt "Noto Sans JP"').then(function () {
        Highcharts.setOptions({
            chart: {
                style: {
                    fontFamily: 'Noto Sans JP, sans-serif'
                }
            },
            lang: {
                decimalPoint: '.',
                thousandsSep: ','
            }
        });

        var chart = Highcharts.chart('container', {
            title: {
                text: '日本語で HighChart をテストする'
            },

            subtitle: {
                text: 'ボタンをクリックして、PNG、JPEG、SVG、または PDF としてダウンロードします'
            },

            chart: {
                type: 'area'
            },

            xAxis: {
                categories: ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun',
                    'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec']
            },

            series: [{
                data: [29.9, 71.5, 106.4, 129.2, 144.0, 176.0, 135.6, 126.0, 148.5, 216.4, 194.1, 95.6, 54.4]
            }],
            exporting: {
                pdfFont: {
                    normal: 'NotoSans-Regular.ttf',
                    bold: 'NotoSans-Bold.ttf',
                    bolditalic: 'NotoSans-BoldItalic.ttf',
                    italic: 'NotoSans-Italic.ttf'
                }
            }
        });
        
        var exportChart = function () {
            chart.exportChart({
                type: 'image/png',
                filename: 'highcharts-export',
                chartOptions: {
                    chart: {
                        style: {
                            fontFamily: 'Noto Sans JP, sans-serif'
                        }
                    }
                }
            });
        }

        $('button').on('click', function () {
            exportChart();
        });
    });
</script>